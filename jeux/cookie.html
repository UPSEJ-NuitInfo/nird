<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>GAFAM Clicker : Highscore Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap');

        body {
            background-color: #1a1a1a;
            color: white;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- RECORD (NOUVEAU) --- */
        .highscore-box {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #FFD700;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            color: #FFD700;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
        }

        /* --- GAUCHE : CLIC --- */
        .click-zone {
            width: 40%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 2px solid #333;
            background: radial-gradient(circle at center, #2a2a2a 0%, #1a1a1a 100%);
            user-select: none;
            position: relative;
        }

        #big-cookie {
            width: 250px;
            height: 250px;
            background-color: #fff;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.05s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            box-shadow: 0 0 30px rgba(255,255,255,0.1);
        }
        
        #big-cookie::after { content: "ü¶Ü"; } 
        #big-cookie { background: none; }

        #big-cookie:active { transform: scale(0.95); }
        #big-cookie:hover { transform: scale(1.05); }

        .score-container { text-align: center; margin-bottom: 50px; }
        #score { font-size: 50px; font-weight: 900; color: #4285F4; }
        #score-label { font-size: 18px; color: #aaa; margin-bottom: 5px;}
        
        .stats { display: flex; gap: 20px; justify-content: center; margin-top: 10px; font-size: 14px;}
        .stat-item { background: #333; padding: 5px 10px; border-radius: 5px; }
        .val-sec { color: #4CAF50; font-weight: bold; }
        .val-clic { color: #d63031; font-weight: bold; }

        .floater {
            position: absolute;
            font-weight: bold;
            color: white;
            pointer-events: none;
            animation: floatUp 0.8s ease-out forwards;
            font-size: 24px;
            text-shadow: 2px 2px 0 #000;
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(1.5); }
        }

        /* --- DROITE : SHOP --- */
        .shop-zone {
            width: 60%;
            background-color: #222;
            display: flex;
            flex-direction: column;
        }

        .shop-header {
            padding: 20px;
            background-color: #333;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            z-index: 10;
            border-bottom: 2px solid #444;
        }

        #upgrades-list {
            overflow-y: auto;
            flex-grow: 1;
            padding: 20px;
        }

        #upgrades-list::-webkit-scrollbar { width: 8px; }
        #upgrades-list::-webkit-scrollbar-thumb { background: #555; border-radius: 4px; }

        .upgrade {
            background-color: #333;
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 6px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .upgrade:hover { background-color: #444; transform: translateX(5px); }
        .upgrade:active { transform: scale(0.98); }
        .upgrade.disabled { opacity: 0.4; cursor: not-allowed; filter: grayscale(1); }

        .info { flex-grow: 1; margin-left: 10px; }
        .info h3 { margin: 0; font-size: 16px; }
        .info p { margin: 4px 0 0 0; color: #888; font-size: 13px; }
        
        .icon { font-size: 24px; width: 40px; text-align: center;}
        
        .cost-box { text-align: right; min-width: 80px; }
        .cost { font-weight: bold; color: #ff6b6b; font-size: 16px; display: block; }
        .count { font-size: 24px; color: #555; font-weight: bold; position: absolute; right: 20px; top: 10px; opacity: 0.1; }

        .type-clic { border-left-color: #e84393; } 
        .type-auto { border-left-color: #0984e3; } 
        
        .bonus-text-clic { color: #e84393; font-weight: bold; }
        .bonus-text-auto { color: #0984e3; font-weight: bold; }

    </style>
</head>
<body>

    <div class="highscore-box">
        üèÜ RECORD : <span id="highscore">0</span>
    </div>

    <div class="click-zone">
        <div class="score-container">
            <div id="score">0</div>
            <div id="score-label">Donn√©es Vol√©es (Octets)</div>
            
            <div class="stats">
                <div class="stat-item">üëÜ <span id="click-power" class="val-clic">1</span> /clic</div>
                <div class="stat-item">‚öôÔ∏è <span id="per-second" class="val-sec">0</span> /sec</div>
            </div>
        </div>

        <div id="big-cookie" onclick="clicUser(event)"></div>
    </div>

    <div class="shop-zone">
        <div class="shop-header">üõí DARK WEB MARKET</div>
        <div id="upgrades-list">
            </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        let score = 0;
        let highscore = 0; // Nouveau
        let dataPerSecond = 0;
        let clickPower = 1;

        const upgrades = [
            { id: 0, type: "clic", name: "Souris Gamer", icon: "üñ±Ô∏è", cost: 20, power: 1, count: 0 },
            { id: 1, type: "clic", name: "Double Clic", icon: "üëÜ", cost: 100, power: 5, count: 0 },
            { id: 2, type: "clic", name: "Hack du Curseur", icon: "üíª", cost: 500, power: 15, count: 0 },
            
            { id: 3, type: "auto", name: "Stagiaire Data", icon: "üë∂", cost: 15, power: 1, count: 0 },
            { id: 4, type: "auto", name: "Script Python", icon: "üêç", cost: 200, power: 5, count: 0 },
            { id: 5, type: "auto", name: "Serveur Cloud", icon: "‚òÅÔ∏è", cost: 1100, power: 20, count: 0 },
            { id: 6, type: "auto", name: "Rachat Twitter", icon: "üê¶", cost: 12000, power: 100, count: 0 },
            { id: 7, type: "auto", name: "Meta (Facebook)", icon: "üìò", cost: 130000, power: 500, count: 0 },
            { id: 8, type: "auto", name: "Amazon", icon: "üì¶", cost: 1400000, power: 2000, count: 0 },
            { id: 9, type: "auto", name: "Google", icon: "üëÅÔ∏è", cost: 20000000, power: 10000, count: 0 },
            { id: 10, type: "clic", name: "IA Consciente", icon: "ü§ñ", cost: 100000000, power: 50000, count: 0 }
        ];

        // --- FONCTIONS ---

        function init() {
            // Charger le Highscore
            const savedScore = localStorage.getItem('gafam_highscore');
            if (savedScore) {
                highscore = parseInt(savedScore);
                document.getElementById('highscore').innerText = formatNumber(highscore);
            }

            upgrades.sort((a, b) => a.cost - b.cost);
            renderShop();
            
            setInterval(() => {
                if (dataPerSecond > 0) {
                    ajouterScore(dataPerSecond);
                    pulseAnim();
                }
            }, 1000);

            setInterval(updateButtons, 100);
        }

        function clicUser(e) {
            ajouterScore(clickPower);
            createFloater(e.clientX, e.clientY, "+" + formatNumber(clickPower));
        }

        function ajouterScore(amount) {
            score += amount;
            document.getElementById('score').innerText = formatNumber(score);
            document.title = formatNumber(score) + " Octets";

            // V√©rifier et sauvegarder le record
            if (score > highscore) {
                highscore = score;
                document.getElementById('highscore').innerText = formatNumber(highscore);
                localStorage.setItem('gafam_highscore', highscore);
            }
        }

        function createFloater(x, y, text) {
            const floater = document.createElement("div");
            floater.className = "floater";
            floater.innerText = text;
            const randomX = Math.random() * 40 - 20;
            floater.style.left = (x + randomX) + "px";
            floater.style.top = (y - 50) + "px";
            document.body.appendChild(floater);
            setTimeout(() => floater.remove(), 800);
        }

        function pulseAnim() {
            const scoreElem = document.getElementById('big-cookie');
            scoreElem.style.transform = "scale(1.02)";
            setTimeout(() => scoreElem.style.transform = "scale(1)", 100);
        }

        function buyUpgrade(id) {
            const item = upgrades.find(u => u.id === id);

            if (score >= item.cost) {
                score -= item.cost;
                ajouterScore(0); // Refresh affichage

                item.count++;
                
                if (item.type === "clic") {
                    clickPower += item.power;
                    document.getElementById('click-power').innerText = formatNumber(clickPower);
                } else {
                    dataPerSecond += item.power;
                    document.getElementById('per-second').innerText = formatNumber(dataPerSecond);
                }
                
                item.cost = Math.ceil(item.cost * 1.15);
                renderShop();
            }
        }

        function renderShop() {
            const list = document.getElementById('upgrades-list');
            list.innerHTML = ""; 

            upgrades.forEach((item) => {
                const div = document.createElement('div');
                div.className = `upgrade type-${item.type}`;
                div.id = `upgrade-${item.id}`;
                div.onclick = () => buyUpgrade(item.id);

                const bonusText = item.type === "clic" 
                    ? `+${formatNumber(item.power)} Clic` 
                    : `+${formatNumber(item.power)} /sec`;
                
                const bonusClass = item.type === "clic" ? "bonus-text-clic" : "bonus-text-auto";

                div.innerHTML = `
                    <div class="icon">${item.icon}</div>
                    <div class="info">
                        <h3>${item.name}</h3>
                        <p class="${bonusClass}">${bonusText}</p>
                    </div>
                    <div class="cost-box">
                        <span class="cost">${formatNumber(item.cost)}</span>
                    </div>
                    <div class="count">${item.count}</div>
                `;
                list.appendChild(div);
            });
            updateButtons();
        }

        function updateButtons() {
            upgrades.forEach((item) => {
                const div = document.getElementById(`upgrade-${item.id}`);
                if (div) {
                    if (score < item.cost) {
                        div.classList.add('disabled');
                    } else {
                        div.classList.remove('disabled');
                    }
                }
            });
        }

        function formatNumber(num) {
            if (num >= 1000000000) return (num / 1000000000).toFixed(2) + " Md";
            if (num >= 1000000) return (num / 1000000).toFixed(2) + " M";
            if (num >= 1000) return (num / 1000).toFixed(1) + " k";
            return Math.floor(num);
        }

        // Lancement
        init();

    </script>
</body>
</html>